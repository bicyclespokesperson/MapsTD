*{margin:0;padding:0;box-sizing:border-box}html,body{height:100%}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;overflow:hidden;color:#f0f0f0}#map{position:absolute;top:0}#app-container{display:flex;width:100%;height:100%}#sidebar{width:280px;background-color:#1a1a1a;padding:16px;display:flex;flex-direction:column;border-right:1px solid #333;z-index:1000;gap:12px}#sidebar h1{font-size:1.4rem;margin:0;color:#646cff;font-weight:700;letter-spacing:.5px}.sidebar-section{display:flex;flex-direction:column;gap:8px}.section-title{font-size:.75rem;text-transform:uppercase;letter-spacing:1.5px;color:#666;margin:0;font-weight:600}.section-divider{border:none;border-top:1px solid #333;margin:4px 0}.share-section{display:flex;flex-direction:row;gap:8px}.share-section button{flex:1;font-size:.85rem;padding:8px 12px}#main-content{flex:1;position:relative;background-color:#000}#map-container{width:100%;height:100%;position:relative}#map{width:100%;height:100%;z-index:1}#game{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:2}.controls{display:flex;flex-direction:column;gap:8px}.selection-buttons{display:flex;gap:6px}.selection-buttons button{flex:1;font-size:.8rem;padding:8px 10px}.help-text{font-size:.75rem;color:#666;margin:0}.step-indicator{display:flex;align-items:center;gap:6px}.step-number{display:inline-flex;align-items:center;justify-content:center;width:18px;height:18px;background:#333;border-radius:50%;font-size:.7rem;font-weight:600;color:#888}#wave-preview{background:linear-gradient(135deg,#646cff1a,#5058c80d);border:1px solid rgba(100,108,255,.25);border-radius:8px;padding:10px 12px}#wave-preview.hidden{display:none}.wave-preview-label{font-size:.7rem;text-transform:uppercase;letter-spacing:1px;color:#666;margin:0 0 8px;font-weight:600}#wave-preview-content{display:flex;flex-wrap:wrap;gap:10px}.wave-preview-item{display:flex;align-items:center;gap:5px;background:#0003;padding:4px 8px;border-radius:12px}.enemy-icon{width:12px;height:12px;border-radius:50%;box-shadow:0 0 6px currentColor}.enemy-count{font-size:.85rem;font-weight:600;color:#fff}#game-controls{display:flex;gap:6px}#game-controls.hidden{display:none}#pauseBtn,#speedBtn{flex:1;font-size:.85rem;padding:8px 12px;font-weight:600}#speedBtn{min-width:50px}#speedBtn.fast{background:linear-gradient(135deg,#646cff,#4850b8);border-color:#646cff}#speedBtn.slow{background:linear-gradient(135deg,#3a3f90,#2a2f70);border-color:#3a3f90}#pauseBtn.paused{background:linear-gradient(135deg,#f60,#cc5200);border-color:#f60}.size-tooltip{background:#000c;border:none;border-radius:4px;padding:6px 10px;font-size:14px;font-weight:700;color:#fff;white-space:nowrap}.size-tooltip:before{display:none}.defend-cursor,.base-cursor{cursor:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><circle cx="16" cy="16" r="2" fill="%23ff4444"/><line x1="16" y1="0" x2="16" y2="12" stroke="%23ff4444" stroke-width="2"/><line x1="16" y1="20" x2="16" y2="32" stroke="%23ff4444" stroke-width="2"/><line x1="0" y1="16" x2="12" y2="16" stroke="%23ff4444" stroke-width="2"/><line x1="20" y1="16" x2="32" y2="16" stroke="%23ff4444" stroke-width="2"/><circle cx="16" cy="16" r="10" fill="none" stroke="%23ff4444" stroke-width="1" stroke-opacity="0.5"/></svg>') 16 16,crosshair!important}button{border-radius:8px;border:1px solid #444;padding:10px 16px;font-size:.9rem;font-weight:500;font-family:inherit;background:linear-gradient(135deg,#2a2a2a,#1f1f1f);cursor:pointer;transition:all .15s ease;color:#fff}button:hover:not(:disabled){border-color:#646cff;transform:translateY(-1px);box-shadow:0 4px 12px #646cff26}button:active:not(:disabled){transform:translateY(0)}button:focus,button:focus-visible{outline:2px solid #646cff;outline-offset:2px}button:disabled{opacity:.4;cursor:not-allowed;filter:grayscale(30%)}#startWaveBtn:not(:disabled){background:linear-gradient(135deg,#646cff,#4850b8);border-color:#646cff}#startWaveBtn:not(:disabled):hover{box-shadow:0 4px 16px #646cff66}#stats-panel{margin-top:auto;background:linear-gradient(135deg,#252525,#1f1f1f);padding:12px;border-radius:10px;border:1px solid #333;display:flex;flex-direction:column;gap:8px}.stat-row{display:flex;align-items:center;gap:8px;padding:6px 8px;background:#0003;border-radius:6px}.stat-icon{font-size:1rem;width:24px;text-align:center;cursor:help}.stat-row .stat-label{font-size:.8rem;color:#888;flex:1}.stat-row .stat-value{font-size:1.1rem;font-weight:700;color:#fff}.modal{display:none;position:fixed;z-index:2000;left:0;top:0;width:100%;height:100%;background-color:#00000080}.modal.active{display:flex;align-items:center;justify-content:center}.modal-content{background-color:#242424;padding:20px;border-radius:8px;width:80%;max-width:600px;position:relative;border:1px solid #444}.modal-close{position:absolute;right:15px;top:10px;font-size:24px;cursor:pointer}.modal-content h2{margin-bottom:20px;color:#333}#configInput{width:100%;font-family:Monaco,Menlo,Courier New,monospace;font-size:12px;border:1px solid #ddd;border-radius:4px;resize:vertical}.modal-actions{margin-top:20px;display:flex;gap:10px;justify-content:flex-end}.modal-actions button{padding:10px 20px;font-size:14px;font-weight:600;border:none;border-radius:6px;cursor:pointer;transition:all .2s}#modalConfirm{background-color:#4caf50;color:#fff}#modalConfirm:hover{background-color:#45a049}#modalCancel{background-color:#f44336;color:#fff}#modalCancel:hover{background-color:#da190b}#loading-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000b3;z-index:3000;display:flex;flex-direction:column;justify-content:center;align-items:center;color:#fff}#loading-overlay.hidden{display:none}.spinner{width:50px;height:50px;border:5px solid #f3f3f3;border-top:5px solid #646cff;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:20px}.loading-text{font-size:1.2rem;font-weight:700}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}#game-over-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:radial-gradient(ellipse at center,#280000f2,#000000fa);z-index:3000;display:flex;justify-content:center;align-items:center}#game-over-overlay.hidden{display:none}.game-over-content{text-align:center;animation:fadeInUp .5s ease-out}@keyframes fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.game-over-title{font-size:4rem;font-weight:700;color:#f44;text-shadow:0 0 20px rgba(255,68,68,.5),0 0 40px rgba(255,68,68,.3);margin-bottom:40px;letter-spacing:8px}.game-over-stats{display:flex;gap:40px;justify-content:center;margin-bottom:50px}.game-over-stat{background:#ffffff1a;border:1px solid rgba(255,255,255,.2);border-radius:12px;padding:20px 30px;min-width:150px}.stat-label{display:block;font-size:.9rem;color:#888;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px}.stat-value{display:block;font-size:2.5rem;font-weight:700;color:#fff}.game-over-buttons{display:flex;gap:16px;justify-content:center;flex-wrap:wrap}.replay-map-btn,.play-again-btn{border:none;color:#fff;padding:16px 32px;font-size:1.1rem;font-weight:700;border-radius:8px;cursor:pointer;text-transform:uppercase;letter-spacing:1.5px;transition:all .2s ease}.replay-map-btn{background:linear-gradient(135deg,#10b981,#059669);box-shadow:0 4px 15px #10b98166}.replay-map-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px #10b98199}.play-again-btn{background:linear-gradient(135deg,#646cff,#4850b8);box-shadow:0 4px 15px #646cff66}.play-again-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px #646cff99}.replay-map-btn:active,.play-again-btn:active{transform:translateY(0)}#tower-shop-panel{position:absolute;bottom:0;left:0;right:0;height:140px;background:linear-gradient(180deg,#1a1a1afa,#141414fc);border-top:2px solid #646cff;padding:12px 16px;z-index:100;display:flex;align-items:center;justify-content:center;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}#tower-shop-panel.hidden{display:none}#tower-cards{display:flex;gap:12px;align-items:stretch}.tower-card{background:linear-gradient(145deg,#2a2a2a,#222);border:2px solid #444;border-radius:10px;padding:10px 12px;width:110px;text-align:center;cursor:pointer;transition:all .15s ease;display:flex;flex-direction:column;align-items:center}.tower-card:hover{border-color:#646cff;transform:translateY(-4px);box-shadow:0 6px 16px #646cff33}.tower-card.selected{border-color:#4caf50;background:linear-gradient(145deg,#2a4a2a,#1f3a1f);box-shadow:0 0 12px #4caf504d}.tower-card.disabled{opacity:.4;cursor:not-allowed;filter:grayscale(50%)}.tower-card.disabled:hover{transform:none;box-shadow:none;border-color:#444}.tower-card-name{font-weight:600;font-size:.9rem;margin-bottom:4px;color:#f0f0f0}.tower-card-cost{font-size:1rem;font-weight:700;color:gold;margin-bottom:6px}.tower-card-stats{font-size:.7rem;color:#999;line-height:1.5}.tower-card-stats span{cursor:help}.tower-card-dps{color:#ff6b6b;font-weight:600}.tower-card-special{color:#ff9f43;font-style:italic}.tower-card-icon{width:32px;height:32px;margin-bottom:6px;border-radius:50%;box-shadow:0 2px 8px #0000004d}#tower-info-panel{background:linear-gradient(135deg,#1f1f1f,#1a1a1a);border:1px solid #333;border-radius:10px;padding:12px;margin-top:12px;max-height:400px;overflow-y:auto}#tower-info-panel.hidden{display:none}#tower-info-panel h3{display:flex;align-items:center;justify-content:space-between;margin:0 0 10px;padding-bottom:8px;border-bottom:1px solid #333}.tower-title-name{color:#646cff;font-size:1rem;font-weight:600}.tower-title-level{background:#646cff;color:#fff;font-size:.7rem;padding:2px 8px;border-radius:10px;font-weight:600}#towerInfoContent{font-size:.85rem}.tower-info-section{margin-bottom:10px}.tower-info-section-title{font-size:.7rem;text-transform:uppercase;letter-spacing:1px;color:#666;margin:0 0 6px;font-weight:600}.tower-info-row{display:flex;justify-content:space-between;align-items:center;padding:6px 8px;background-color:#0003;border-radius:6px}.tower-info-label{color:#888;font-size:.8rem;cursor:help}.targeting-select{background:#333;color:#fff;border:1px solid #555;padding:4px 8px;border-radius:4px;font-size:.8rem;cursor:pointer}.targeting-select:hover{border-color:#646cff}.tower-stats-grid{display:grid;grid-template-columns:1fr 1fr;gap:6px}.tower-stat-item{background:#0003;border-radius:6px;padding:6px 8px;display:flex;flex-direction:column;cursor:help}.tower-stat-item .stat-label{font-size:.65rem;color:#666;text-transform:uppercase;letter-spacing:.5px}.tower-stat-item .stat-value{font-size:.9rem;font-weight:600;color:#fff}.tower-stat-item.highlight{background:#ff6b6b26;border:1px solid rgba(255,107,107,.3)}.tower-stat-item.highlight .stat-value{color:#ff6b6b}.tower-info-actions{display:flex;gap:8px;margin-bottom:10px}.tower-info-actions button{flex:1;font-size:.8rem;padding:8px 10px;border-radius:6px;font-weight:600;transition:all .15s}.upgrade-btn{background:linear-gradient(135deg,#4caf50,#388e3c);border:none;color:#fff}.upgrade-btn:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #4caf5066}.upgrade-btn.maxed{background:#333;color:#666}.upgrade-btn.unaffordable{background:linear-gradient(135deg,#555,#444);opacity:.6;filter:grayscale(40%)}.upgrade-btn.unaffordable:hover{transform:none;box-shadow:none}.sell-btn{background:transparent;border:1px solid #f44336;color:#f44336}.sell-btn:hover{background:#f443361a}.tower-info-footer{display:flex;justify-content:space-between;padding-top:8px;border-top:1px solid #333;font-size:.7rem;color:#666}.tower-info-footer span{cursor:help}#map-layer-toggle{position:absolute;bottom:20px;left:10px;z-index:1000;display:flex;border-radius:4px;overflow:hidden;box-shadow:0 2px 6px #0000004d}#tower-shop-panel:not(.hidden)~#map-container #map-layer-toggle,#main-content:has(#tower-shop-panel:not(.hidden)) #map-layer-toggle{bottom:160px}.layer-btn{padding:8px 14px;font-size:.85rem;font-weight:500;border:none;background:#fffffff2;color:#333;cursor:pointer;transition:all .15s}.layer-btn:first-child{border-right:1px solid #ddd}.layer-btn:hover{background:#f0f0f0}.layer-btn.active{background:#646cff;color:#fff}.layer-btn.active:hover{background:#5258d4}#road-toggle{position:absolute;bottom:20px;right:10px;z-index:1000;background:#fffffff2;padding:8px 12px;border-radius:4px;box-shadow:0 2px 6px #0000004d;cursor:pointer;font-size:.85rem;font-weight:500;color:#333;display:flex;align-items:center;gap:6px;-webkit-user-select:none;user-select:none}#road-toggle.hidden{display:none}#road-toggle:hover{background:#f0f0f0}#road-toggle input[type=checkbox]{width:16px;height:16px;cursor:pointer}#tower-shop-panel:not(.hidden)~#map-container #road-toggle,#main-content:has(#tower-shop-panel:not(.hidden)) #road-toggle{bottom:160px}
