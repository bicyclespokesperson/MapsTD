*{margin:0;padding:0;box-sizing:border-box}html,body{height:100%}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;overflow:hidden;color:#f0f0f0}#map{position:absolute;top:0}#app-container{display:flex;width:100%;height:100%}#sidebar{width:300px;background-color:#1a1a1a;padding:20px;display:flex;flex-direction:column;border-right:1px solid #333;z-index:1000}#sidebar h1{font-size:1.5rem;margin-top:0;margin-bottom:20px;color:#646cff}#main-content{flex:1;position:relative;background-color:#000}#map-container{width:100%;height:100%;position:relative}#map{width:100%;height:100%;z-index:1}#game{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:2}.controls{display:flex;flex-direction:column;gap:10px}.help-text{font-size:.8rem;color:#888;margin:-5px 0 10px}#wave-preview{background:#646cff1a;border:1px solid rgba(100,108,255,.3);border-radius:8px;padding:10px 12px;margin:10px 0}#wave-preview.hidden{display:none}.wave-preview-label{font-size:.85rem;color:#888;margin:0 0 8px}#wave-preview-content{display:flex;flex-wrap:wrap;gap:12px}.wave-preview-item{display:flex;align-items:center;gap:6px}.enemy-icon{width:14px;height:14px;border-radius:50%;border:1px solid rgba(255,255,255,.3)}.enemy-count{font-size:.95rem;font-weight:500;color:#fff}#game-controls{display:flex;gap:8px;margin-top:10px}#game-controls.hidden{display:none}#pauseBtn,#speedBtn{flex:1}#speedBtn.fast{background:#646cff;border-color:#646cff}#speedBtn.slow{background:#3a3f90;border-color:#3a3f90}#pauseBtn.paused{background:#f60;border-color:#f60}.size-tooltip{background:#000c;border:none;border-radius:4px;padding:6px 10px;font-size:14px;font-weight:700;color:#fff;white-space:nowrap}.size-tooltip:before{display:none}.defend-cursor,.base-cursor{cursor:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><circle cx="16" cy="16" r="2" fill="%23ff4444"/><line x1="16" y1="0" x2="16" y2="12" stroke="%23ff4444" stroke-width="2"/><line x1="16" y1="20" x2="16" y2="32" stroke="%23ff4444" stroke-width="2"/><line x1="0" y1="16" x2="12" y2="16" stroke="%23ff4444" stroke-width="2"/><line x1="20" y1="16" x2="32" y2="16" stroke="%23ff4444" stroke-width="2"/><circle cx="16" cy="16" r="10" fill="none" stroke="%23ff4444" stroke-width="1" stroke-opacity="0.5"/></svg>') 16 16,crosshair!important}button{border-radius:8px;border:1px solid transparent;padding:.6em 1.2em;font-size:1em;font-weight:500;font-family:inherit;background-color:#1a1a1a;cursor:pointer;transition:border-color .25s;color:#fff}button:hover{border-color:#646cff}button:focus,button:focus-visible{outline:4px auto -webkit-focus-ring-color}button:disabled{opacity:.5;cursor:not-allowed}#stats-panel{margin-top:auto;background-color:#333;padding:15px;border-radius:8px}.stat-row{display:flex;justify-content:space-between;margin-bottom:5px;font-weight:700}.modal{display:none;position:fixed;z-index:2000;left:0;top:0;width:100%;height:100%;background-color:#00000080}.modal.active{display:flex;align-items:center;justify-content:center}.modal-content{background-color:#242424;padding:20px;border-radius:8px;width:80%;max-width:600px;position:relative;border:1px solid #444}.modal-close{position:absolute;right:15px;top:10px;font-size:24px;cursor:pointer}.modal-content h2{margin-bottom:20px;color:#333}#configInput{width:100%;font-family:Monaco,Menlo,Courier New,monospace;font-size:12px;border:1px solid #ddd;border-radius:4px;resize:vertical}.modal-actions{margin-top:20px;display:flex;gap:10px;justify-content:flex-end}.modal-actions button{padding:10px 20px;font-size:14px;font-weight:600;border:none;border-radius:6px;cursor:pointer;transition:all .2s}#modalConfirm{background-color:#4caf50;color:#fff}#modalConfirm:hover{background-color:#45a049}#modalCancel{background-color:#f44336;color:#fff}#modalCancel:hover{background-color:#da190b}#loading-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000b3;z-index:3000;display:flex;flex-direction:column;justify-content:center;align-items:center;color:#fff}#loading-overlay.hidden{display:none}.spinner{width:50px;height:50px;border:5px solid #f3f3f3;border-top:5px solid #646cff;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:20px}.loading-text{font-size:1.2rem;font-weight:700}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}#game-over-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:radial-gradient(ellipse at center,#280000f2,#000000fa);z-index:3000;display:flex;justify-content:center;align-items:center}#game-over-overlay.hidden{display:none}.game-over-content{text-align:center;animation:fadeInUp .5s ease-out}@keyframes fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.game-over-title{font-size:4rem;font-weight:700;color:#f44;text-shadow:0 0 20px rgba(255,68,68,.5),0 0 40px rgba(255,68,68,.3);margin-bottom:40px;letter-spacing:8px}.game-over-stats{display:flex;gap:40px;justify-content:center;margin-bottom:50px}.game-over-stat{background:#ffffff1a;border:1px solid rgba(255,255,255,.2);border-radius:12px;padding:20px 30px;min-width:150px}.stat-label{display:block;font-size:.9rem;color:#888;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px}.stat-value{display:block;font-size:2.5rem;font-weight:700;color:#fff}.play-again-btn{background:linear-gradient(135deg,#646cff,#4850b8);border:none;color:#fff;padding:16px 48px;font-size:1.2rem;font-weight:700;border-radius:8px;cursor:pointer;text-transform:uppercase;letter-spacing:2px;transition:all .2s ease;box-shadow:0 4px 15px #646cff66}.play-again-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px #646cff99}.play-again-btn:active{transform:translateY(0)}#tower-shop-panel{position:absolute;bottom:0;left:0;right:0;height:150px;background-color:#1a1a1af2;border-top:2px solid #646cff;padding:15px;z-index:100;display:flex;align-items:center;justify-content:center}#tower-shop-panel.hidden{display:none}#tower-cards{display:flex;gap:20px;align-items:center}.tower-card{background-color:#333;border:2px solid #555;border-radius:8px;padding:15px;width:120px;text-align:center;cursor:pointer;transition:all .2s}.tower-card:hover{border-color:#646cff;transform:translateY(-3px)}.tower-card.selected{border-color:#4caf50;background-color:#2a4a2a}.tower-card.disabled{opacity:.5;cursor:not-allowed}.tower-card.disabled:hover{transform:none}.tower-card-name{font-weight:700;font-size:1.1rem;margin-bottom:8px;color:#f0f0f0}.tower-card-cost{font-size:1.2rem;color:gold;margin-bottom:5px}.tower-card-stats{font-size:.85rem;color:#aaa;line-height:1.4}.tower-card-icon{width:40px;height:40px;margin:0 auto 10px;border-radius:50%}#tower-info-panel{background-color:#222;border-top:1px solid #444;padding:15px;margin-top:20px;max-height:500px;overflow-y:auto}#tower-info-panel.hidden{display:none}#tower-info-panel h3{margin-bottom:10px;color:#646cff;font-size:1.1rem}#towerInfoContent{font-size:.9rem;line-height:1.6}.tower-info-row{display:flex;justify-content:space-between;margin-bottom:8px;padding:5px;background-color:#2a2a2a;border-radius:4px}.tower-info-label{color:#aaa}.tower-info-value{color:#f0f0f0;font-weight:700}.tower-info-actions{display:flex;gap:10px;margin-bottom:15px}.tower-info-actions button{flex:1;font-size:.9rem;padding:8px}#map-layer-toggle{position:absolute;bottom:20px;left:10px;z-index:1000;display:flex;border-radius:4px;overflow:hidden;box-shadow:0 2px 6px #0000004d}#tower-shop-panel:not(.hidden)~#map-container #map-layer-toggle,#main-content:has(#tower-shop-panel:not(.hidden)) #map-layer-toggle{bottom:170px}.layer-btn{padding:8px 14px;font-size:.85rem;font-weight:500;border:none;background:#fffffff2;color:#333;cursor:pointer;transition:all .15s}.layer-btn:first-child{border-right:1px solid #ddd}.layer-btn:hover{background:#f0f0f0}.layer-btn.active{background:#646cff;color:#fff}.layer-btn.active:hover{background:#5258d4}
